\documentclass[11pt]{article}
\usepackage[sexy]{evan}

\usepackage{answers}
\Newassociation{hint}{hintitem}{all-hints}
\renewcommand{\solutionextension}{out}
\renewenvironment{hintitem}[1]{\item[\bfseries #1.]}{}
\declaretheorem[style=thmbluebox,name={Theorem}]{thm}

 %Sets
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\RP}{\mathbb{RP}}
\newcommand{\CP}{\mathbb{CP}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb C}
\newcommand{\T}{\mathbb T}
\renewcommand{\hat}{\widehat}
\renewcommand{\Im}{\text{Im }}
\renewcommand{\>}{\rangle}
\newcommand{\<}{\langle}


\renewcommand{\Ker}{\operatorname{Ker}}
\renewcommand{\Im}{\operatorname{Im}}
\renewcommand{\Ext}{\operatorname{Ext}}
\newcommand{\Var}{\operatorname{Var}}
\newcommand{\res}{\operatorname{res}}
\newcommand{\tr}{\operatorname{tr}}

\let \phi \varphi
\let \mc \mathcal
\let \ms \mathscr
\let \mb \mathbb
\let \ol \overline
\let \subset \subseteq
\let \subsetneq \subset
%From Topology
\newcommand{\cT}{\mathcal{T}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\cC}{\mathcal{C}}
\newcommand{\cH}{\mathcal{H}}

\newcommand{\supp}{\text{supp }}

\newcommand{\aint}{\mathrel{\int\!\!\!\!\!\!-}}
\let \grad \nabla
\declaretheorem[style=thmbluebox,name={Problem}]{prob}

\begin{document}
\title{Olympiad Notebook}
\author{Vishal Raman}
\maketitle
\begin{abstract}


\end{abstract}
\tableofcontents
\pagebreak
\section{Combinatorics}
\subsection{Bijections}

\subsection{Invariants and Monovariants}

\subsection{Pigeonhole Principle}
\begin{theorem}[Pigeonhole Principle] Let $m, n$ be positive integers with $m \ge n$.  If $m+1$ pigeons fly to $n$ pigeonholes, then at least one pigeonhole contains at least $\floor{\frac{m}{n}} + 1$ pigeons.
\end{theorem}
\subsection{Extremal Principle}
\subsection{Combinatorial Games}
The main strategies for analyzing combinatorial games are:
\begin{itemize}
\item Play the game: try to find some forced moves.
\item Reduce the game to a simpler game.
\item Start at the end of the game: find endgame positions which are winning and losing and work backwards.
\item Find an invariant or monovariant that a player can control.  
\end{itemize}

\begin{problem} Four heaps contain $38, 45, 61,$ and $70$ matches respectively.  Two players take turns choosing any two of the heaps and removing a non-zero number of matches from each heap.  The player who cannot make a move loses. Which one of the players has a winning strategy?
\end{problem}

\begin{proof}
Denote the heaps with a $4$-tuple $(w, x, y, z)$ with $w \le x \le y \le z$.  We claim the winning positions are of the form $(w, x, y, z)$ with $w < y$.  It is clear that $(0, 0, y, z)$ leads to a win by removing $y$ and $z$ and $(0, x, y, z)$ leads to a win by reducing to $(0, 1, 1, z)$ which is forced to leave either $1$ or $2$ heaps.

Since we remove tiles on each move, the game must terminate.  If we have $(w, x, y, z)$ with $w < y$, we can reduce to $(w, w, w, x)$ by sending $y$ and $z$ to $w$.

We show that $(w, w, w, z)$ is a losing position.  We have three cases:
\begin{enumerate}
\item If we remove from two of the $w$-heaps, we are left with $(w', w'', w, z)$.
\item If we remove from a $w$-heap and the $z$-heap, we are left with either $(w', z', w, w)$ or $(w', w, z', w)$ or $(w', w, w, z')$.
\item If we remove any number of heaps entirely, the resulting position is clearly winning.
\end{enumerate}

It follows that $(w, x, y, z)$ with $w < y$ is a winning position as desired. 
\end{proof}

\begin{problem} The number $10^{2015}$ is written on a blackboard.  Alice and Bob play a game where each player can do one of the following on each turn:
\begin{itemize}
\item replace an integer $x$ on the board with integers $a, b > 1$ so that $x = ab$
\item erase one or both of two equal integers on the blackboard.  
\end{itemize}
The player who is not able to make a move loses the game.  Who has a winning strategy?
\end{problem}
\begin{proof}
We claim Alice has a winning strategy.  First, it is clear that the game must eventually terminate.  On the first turn, Alice can replace $10^{2015}$ with $2^{2015}$ and $5^{2015}$.  We claim that after any of Bob's turns, Alice can move the board into the state 
$$2^{\alpha_1} 2^{\alpha_2} \dots 2^{\alpha_k} 5^{\alpha_1} 5^{\alpha_2} \dots 5^{\alpha_k}.$$

If Bob sends $2^{\alpha_j}$ to $2^{\beta_1} ,2^{\beta_2}$, then Alice can send $5^{\alpha_j}$ to $5^{\beta_1} , 5^{\beta_2}$ and vice versa.  Otherwise, if Bob removes one or two integers $2^{\alpha_j}$, $2^{\alpha_k}$, then we have $\alpha_j = \alpha_j$ so Alice can remove one or two of $5^{\alpha_j}, 5^{\alpha_k}$ or vice versa.  Since Alice can always follow the copycat strategy and the game eventually terminates, we must have that Bob is unable to make a move at some point, which implies that Alice wins the game as desired.   
\end{proof}

\begin{problem}


\end{problem}
\subsection{Algorithms}

\subsection{Generating Functions}
\begin{problem}[Putnam 2020 A2] Let $k$ be a non-negative integer.  Evaluate 
$$\sum_{j=0}^k 2^{k-j} \binom{k+j}{j}.$$
\begin{proof}
We claim the sum evaluates to $4^k$.  Note that $\binom{k+j}{j} = \binom{k+j}{k}$.  It follows that the sum is the coefficient of $x^k$ in the power series $\sum_{j=0}^n 2^{k-j} (1 + x)^{k + j}$.  Evaluating this, we find
\begin{align*}
\sum_{j=0}^n 2^{k-j} (1 + x)^{k + j} &= 2^{k}(1 + x)^{k} \sum_{j=0}^k 2^{-j} (1 + x)^j \\
&= 2^k (1 + x)^k \frac{1 - (1 + x)^{k+1}/2^{k+ 1}}{1 - (1 + x)/2} \\
&= \frac{2^{k + 1}(1 + x)^k - (1 + x)^{2k + 1}}{1 - x} \\
&= 2^{k + 1}(1 + x)^k - (1 + x)^{2k + 1} \sum_{n \ge 0} x^n.
\end{align*}
It follows that the coefficient of $x^k$ is given by 
$$2^{k +1} \sum_{j=0}^k \binom{k}{j} - \sum_{j=0}^k \binom{2k+1}{j} = 2^{2k+1} - 2^{2k} = 4^k.$$
\end{proof}
\end{problem} 
\begin{problem}(CJMO 2020/1) Let $N$ be a positive integer, and let $S$ be the set of all tuples with positive integer elements and a sum of $N$.  For all tuples $t$, let $p(t)$ denote the product of all the elements of $t$.  Evaluate 
$$\sum_{t \in S} p(t).$$
\end{problem}
\begin{proof}
We claim the sum evaluates to $F_{2N}$, where $F_k$ denotes the $k$-th Fibonacci number.  Note that the sum can be represented as the coefficient of $x^N$ in $\sum_{k=1}^N \left (\sum_{n \ge 0} nx^n \right)^k$.  Evaluating this, we find 
\begin{align*}
\sum_{k=1}^N \left (\sum_{n \ge 0} nx^n \right)^k &=  \sum_{k=1}^N \left ( \frac{x}{(1 - x)^2} \right)^k \\
&= \sum_{k=1}^N \frac{x^k}{(1 - x)^{2k}} \\
&= \sum_{k=1}^N \sum_{j \ge 0} \binom{2k - 1 + j}{2k - 1} x^{j + k} .
\end{align*}
The coefficient of $x^N$ is given by  $$\sum_{k=1}^N \binom{N + k - 1}{2k - 1} = \sum_{k=1}^N \binom{N + k - 1}{N - k} = \sum_{j \ge 0} \binom{2N - 1 - j}{j} = F_{2N}.$$
\end{proof}
\begin{problem}[IMO 1995/6] Let $p$ be an odd prime number. How many $p$-element subsets $ A$ of $ \{1,2,\dots,2p\}$ are there, the sum of whose elements is divisible by $p$?
\end{problem}
\begin{proof}
Define $f(x, y) = \prod_{k=1}^{2p} (1 + x^k y)$.  We wish to find the sum of the coefficients of terms of the form $x^{p \ell} y^p$.  We do this by first considering $f$ as a generating function in $x$ using the root of unity filter associated to $\omega = e^{\frac{2\pi i }{p}}$.   Then, we read off the coefficient of $y^p$ to find the desired expression.

Note that for $1 \le k \le p-1$, 
$$f(\omega^k, y) = \prod_{k=1}^{2p} (1 + \omega^k y) = \prod_{k=1}^{p} (1 + \omega^k y)^2 = (1 + y^p)^2.$$

It follows that 
\begin{align*}
\frac{1}{p} \sum_{i=0}^{p-1} f(\omega^k, y) &= \frac{1}{p} \left ((1 +y)^{2p} + \sum_{i=1}^{p-1} f(\omega^k, y) \right) \\
&= \frac{(1 + y)^{2p} + (p-1)(1 + y^p)^2}{p}.
\end{align*}
Finally, the coefficient of $y^p$ is given by 
$$\frac{\binom{2p}{p} + 2(p-1)}{2}.$$
\end{proof}

\subsection{Enumerative Combinatorics}

\subsection{Probabilistic Method}


%Some tips for using the probabilistic method:
%\begin{itemize}
%\item A statement $E$ can be true by showing that its probability is greater than $0$.
%\item Show that $E$ is true is the same as showing $P(\lnot E) < 1$.
%\item Show that $X$ can be at least or at most $a$ by showing $E[X] \ge a$ or $E[X] \le a$ respectively.
%\item Show that it is possible for $|X|$ to be at least or at most $a > 0$ by showing $E[X] = 0$ and $\Var(X) \ge a^2$ or $\Var(X) \le a^2$ respectively.
%\end{itemize}
%
%
%
%Sources:
%\begin{enumerate}
%\item Evan Chen, \href{https://web.evanchen.cc/handouts/ProbabilisticMethod/ProbabilisticMethod.pdf}{Expected Uses of Probability}
%\item Espen Slettnes, \href{https://mathcircle.berkeley.edu/sites/default/files/handouts/2019/Probabilistic_Method_Espen_Slettnes_0.pdf}{Probabilistic Method} 
%\end{enumerate}


\subsection{Algebraic Combinatorics}

\subsection{Combinatorial Geometry}
\subsubsection{Convex Hull}
\begin{problem}[Happy-Ending Problem] Suppose we have five points in the plane with no three collinear.  Show that we can find four points whose convex hull is a quadrilateral.
\end{problem}
\begin{proof}
Take the convex hull of the five points.  If it is a quadrilateral or pentagon, we are done(choose any 4 points in the latter case).  Suppose the convex hull is a triangle.  Label the points with $A$ through $E$ and without loss of generality, let the points $A$, $B$, $C$ form the triangle and $D$, $E$, be the points inside the hull.

Extend the line $DE$.  Note that two points must lie on one side of the line - if not then we have three collinear points.  It is easy to show that these four points form a convex quadrilateral. 
\end{proof}
\begin{problem} There are $n > 3$ coplanar points, no three collinear and every four of them are the vertices of a convex quadrilateral.  Prove that the $n$ points are the vertices of a convex $n$-sided polygon.
\end{problem}
\begin{proof}
Suppose that some point $P$ is inside the convex hull of the $n$ points.  Let $Q$ be some vertex of the convex hull.  The diagonals from $Q$ to the other vertices divide the convex hull into triangles and since no three points are collinear, $P$ must lie inside some triangle $\triangle QRS$.  But this is a contradiction since $P, Q, R, S$ do not form a convex quadrilateral.
\end{proof}

\begin{problem}[1985 IMO Longlist] Let $A, B$ be finite disjoint sets of points in the plane such that any three distinct points in $A \cup B$ are not collinear.  Assume that at least one of the sets $A, B$ contains at least five points.  Show that there exists a triangle all of whose vertices are contained in $A$ or in $B$ that does not contain in its interior any point from the other set.
\end{problem}
\begin{proof}
Suppose $A$ has at least five points.  Take $A_1A_2$ on the boundary of the convex hull of $A$.  For any other $A_i \in A$, define $\theta_i = \angle A_1A_2A_i$.  Without loss of generality, $\theta_3 < \theta_4 < \dots < 180^\circ$.  It follows that $\text{conv}(\{A_1, A_2, A_3, A_4, A_5\})$ contains no other points of $A$.
\end{proof}

\begin{problem}[Putnam 2001 B6] Assume that $(a_n)_{n \ge 1}$ is an increasing sequence of positive real numbers such that $\lim \frac{a_n}{n} = 0$.  Must there exist infinitely many positive integers $n$ such that 
$$a_{n-i} + a_{n+i} < 2a_n$$
for $i = 1, \dots, n-1$?
\end{problem}
\begin{proof}
We claim such a subsequence exists.   Let $A = \operatorname{conv}\{(n, a_n) : n \in \N\}$ and let $\partial A$ denote the set of points on the boundary of the convex hull.  

We claim that $\partial A$ contains infinitely many elements.  Suppose not.  Then, $\partial A$ has a last point $(N, a_N)$.  If we let $m = \sup_{n > N} \frac{a_n - a_N}{n - N}$, the slope of the line between $(N, a_N)$ and $(n, a_n)$, then the line through $(N, a_N)$ with slope $m$ lies above(or contains) each point $(n, a_n)$ for $n > N$.  However, since $a_n/n \to 0$ and $a_N, N$ are fixed, we have that $$\frac{a_n - a_N}{n - N} \to 0.$$
This implies that the set of slopes attains a maximum, i. e. there is some point $(M, a_M)$ with $M > N$ so that $m = \frac{a_M - a_N}{M - N}$.  But then, we must also have that $(M, a_M) \in \partial A$, contradicting the fact that $(N, a_N)$ is the last point in $\partial A$.

For each point on the boundary $(n, a_n) \in \partial A$, we must have that midpoint of the line through $(n-i, a_{n-i})$ and $(n+i, a_{n+i})$ for $i \in [n-1]$ must lie below $(n, a_n)$.  From this, it follows that $a_n > \frac{a_{n-i} + a_{n+i}}{2}$, which implies the result.  
\end{proof}

\pagebreak
\section{Algebra}
\subsection{Linear Algebra}
\begin{problem} Let $A \in M_n(\R)$ be skew-symmetric. Show that $\det(A) \ge 0$.
\end{problem}
\begin{proof}
If $n$ is odd, note that
 $$\det(A) = \det(A^\intercal) = \det(-A) = (-1)^n \det(A) = -\det(A).$$
 It follows that $\det(A) = 0$.

Otherwise, suppose $n$ is even and let $p(\lambda) = \det(A - I_n \lambda)$.  If $\lambda \ne 0$ is an eigenvalue, note that $p(\lambda) = 0$ by the Cayley-Hamilton Theorem.  Moreover,
$$p(-\lambda) = \det(A + I_n \lambda) = \det(A^\intercal + I_n^\intercal \lambda) = \det(-A + I_n \lambda) = 0.$$

Moreover, let $v$ be an eigenvector with corresponding eigenvalue $\lambda$.   Note that 
$$\<Av, v\> = \lambda\<v, v\> = \lambda \|v\|^2,$$
$$\<Av, v\> = \<v, A^\intercal v\> = \<v, -Av\> = -\bar{\lambda} \<v, v\> = -\bar{\lambda} \|v\|^2.$$
It follows that $\lambda = -\bar{\lambda}$, which implies that $\lambda = r i$ for $r \in \R$.  Hence,
$$\det(A) = \prod_{j=1}^{n/2} (i \lambda_j)(-i \lambda_j) = \prod_{j=1}^n \lambda_j^2 \ge 0.$$ 
\end{proof}

\begin{problem} Let $A \in M_n(\R)$ with $A^3 = A + I_n$.  Show that $\det(A) > 0$.
\end{problem}
\begin{proof}
Let $p(x) = x^3 - x - 1$.  Note that $p(0) = -1$, $p(2) = 5$, so the polynomial has a root in the interval $(0, 2)$ by the intermediate value theorem.  Furthermore, $p'(x) = 3x^2 - 1$ so the polynomial has critical points at $\pm\frac{1}{\sqrt{3}}$.  It is easy to see that at both of these values, $p(x) < 0$ so it follows that the other roots of $p(x)$ are conjugate complex numbers.  Let the roots be $\lambda_1, \lambda_2, \lambda_3$ with $\lambda_1$ being the positive real root and $\lambda_2, \lambda_3$ the conjugate complex ones.  If $A$ satisfies $A^3 = A + I_n$, then we must have the eigenvalues of $A$ are $\lambda_1, \lambda_2$ and $\lambda_3$, with multiplicity $\alpha_1, \alpha_2, \alpha_3$ respectively.  Since $\lambda_2, \lambda_3$ are complex conjugates, we must have $\alpha_2 = \alpha_3$, so it follows that 
$$\det(A) = \lambda_1^{\alpha_1} (\lambda_2 \lambda_3)^{\alpha_2} = \lambda_1^{\alpha_1} |\lambda_2|^{\alpha_2} > 0.$$
\end{proof}

\begin{problem} If $A, B \in M_n(\R)$ such that $AB = BA$, then $\det(A^2 + B^2) \ge 0$.
\end{problem}
\begin{proof}
$$\det(A^2 + B^2) = \det(A+iB)\det(A - iB) = \det(A + iB) \ol{\det(A + iB)} = |\det(A + iB)|^2\ge 0.$$
\end{proof}
\begin{problem} Let $A, B \in M_2(\R)$ such that $AB = BA$ and $\det(A^2 + B^2) = 0$.  Show that $\det(A) = \det(B)$.
\end{problem}
\begin{proof}
Let $p_{A, B}(\lambda) = \det(A + \lambda B) = \det(B) \lambda^2 + (\tr A + \tr B - \tr(AB)) \lambda + \det(A)$.  By Problem $1.3$, we have $\det(A + iB)$ and $\det(A-iB) = 0$, which implies that $p_{A, B}(\lambda) = c(\lambda - i)(\lambda + i) = c(\lambda^2 + 1)$.  It follows that $c = \det B = \det A$.
\end{proof}

\begin{problem} Let $A \in M_2(\R)$ with $\det A = -1$.  Show that $\det(A^2 + I_2) \ge 4$.  When does equality hold?
\end{problem}
\begin{proof}
First, note the identity 
$$\det(X+Y) + \det(X - Y) = 2(\det X+ \det Y).$$
This follows from writing $p(z) = \det(X + zY) = \det(Y) z^2 + (\tr X + \tr Y - \tr(XY)) z + \det(X)$ and taking 
$$p(1) + p(-1) = \det(X+Y) + \det(X - Y) = 2\det Y + 2 \det X.$$

Then, taking $X = A^2 + I$ and $Y = 2A$, we have 
$$0 \le  \det(A + I)^2 + \det(A - I)^2 = 2(\det(A^2 + I) + \det(2A)) = 2(\det(A^2 + I) - 4).$$
It follows that $\det(A^2 + I) \ge 4$ as desired.  We have equality when the eigenvalues of $A$ are $1$ and $-1$.  
\end{proof}

\begin{problem} Let $A, B \in M_3(\C)$ with $\det(A) = \det(B) = 1$.  Show that $\det(A + \sqrt{2} B) \ne 0$.
\end{problem}
\begin{proof}

\end{proof}
 \end{document}

